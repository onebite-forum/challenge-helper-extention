var content=function(){"use strict";var $e=Object.defineProperty;var Ie=(T,w,d)=>w in T?$e(T,w,{enumerable:!0,configurable:!0,writable:!0,value:d}):T[w]=d;var E=(T,w,d)=>Ie(T,typeof w!="symbol"?w+"":w,d);var ee,te;function T(r){return r}function w(r,e){Object.entries(e).forEach(([t,s])=>{r.style.setProperty(t,s)})}function d(r,e=0){console.log("[ONEBITE]",`${"  ".repeat(e)}${r}`)}async function k({parent:r,selector:e,limit:t=50,current:s=0}){if(s>t)return null;const n=r||document.body,o=n.querySelector(e);return o||(await new Promise(c=>setTimeout(c,100)),await k({selector:e,limit:t,current:s+1,parent:n}))}async function ne(r=3e3){return new Promise(e=>setTimeout(e,r))}function ie(r){const e=document.createElement("div");e.style.marginTop="10px";const t=document.createElement("span");t.setAttribute("id","noti-badge"),w(t,{"background-color":"rgb(236, 253, 245)",height:"200px",color:"rgb(6, 95, 70)",padding:"5px 10px",borderRadius:"8px",fontSize:"16px"});const s=document.createTextNode(r);return t.appendChild(s),e.append(t),e}async function ae(r){if(!await k({parent:r,selector:"#noti-badge",limit:10})){const t=await k({parent:r,selector:".ReplyBox"}),s=ie("[ğŸ¤– ì±Œë¦°ì§€ í—¬í¼ ë™ì‘ ì¤‘] ì¢‹ì•„ìš”ë¥¼ ìë™ìœ¼ë¡œ ëˆŒë €ì–´ìš” ğŸ‘");t==null||t.appendChild(s),d("ì¢‹ì•„ìš” ë±ƒì§€ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤",2)}}function oe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var L={exports:{}},le=L.exports,J;function ge(){return J||(J=1,function(r,e){(function(t,s){s(r)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:le,function(t){var s,n;if(!((n=(s=globalThis.chrome)==null?void 0:s.runtime)!=null&&n.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const o="The message port closed before a response was received.",c=u=>{const f={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(f).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class h extends WeakMap{constructor(a,g=void 0){super(g),this.createItem=a}get(a){return this.has(a)||this.set(a,this.createItem(a)),super.get(a)}}const S=i=>i&&typeof i=="object"&&typeof i.then=="function",j=(i,a)=>(...g)=>{u.runtime.lastError?i.reject(new Error(u.runtime.lastError.message)):a.singleCallbackArg||g.length<=1&&a.singleCallbackArg!==!1?i.resolve(g[0]):i.resolve(g)},C=i=>i==1?"argument":"arguments",D=(i,a)=>function(m,...x){if(x.length<a.minArgs)throw new Error(`Expected at least ${a.minArgs} ${C(a.minArgs)} for ${i}(), got ${x.length}`);if(x.length>a.maxArgs)throw new Error(`Expected at most ${a.maxArgs} ${C(a.maxArgs)} for ${i}(), got ${x.length}`);return new Promise((p,b)=>{if(a.fallbackToNoCallback)try{m[i](...x,j({resolve:p,reject:b},a))}catch(l){console.warn(`${i} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,l),m[i](...x),a.fallbackToNoCallback=!1,a.noCallback=!0,p()}else a.noCallback?(m[i](...x),p()):m[i](...x,j({resolve:p,reject:b},a))})},I=(i,a,g)=>new Proxy(a,{apply(m,x,p){return g.call(x,i,...p)}});let P=Function.call.bind(Object.prototype.hasOwnProperty);const U=(i,a={},g={})=>{let m=Object.create(null),x={has(b,l){return l in i||l in m},get(b,l,y){if(l in m)return m[l];if(!(l in i))return;let A=i[l];if(typeof A=="function")if(typeof a[l]=="function")A=I(i,i[l],a[l]);else if(P(g,l)){let _=D(l,g[l]);A=I(i,i[l],_)}else A=A.bind(i);else if(typeof A=="object"&&A!==null&&(P(a,l)||P(g,l)))A=U(A,a[l],g[l]);else if(P(g,"*"))A=U(A,a[l],g["*"]);else return Object.defineProperty(m,l,{configurable:!0,enumerable:!0,get(){return i[l]},set(_){i[l]=_}}),A;return m[l]=A,A},set(b,l,y,A){return l in m?m[l]=y:i[l]=y,!0},defineProperty(b,l,y){return Reflect.defineProperty(m,l,y)},deleteProperty(b,l){return Reflect.deleteProperty(m,l)}},p=Object.create(i);return new Proxy(p,x)},G=i=>({addListener(a,g,...m){a.addListener(i.get(g),...m)},hasListener(a,g){return a.hasListener(i.get(g))},removeListener(a,g){a.removeListener(i.get(g))}}),Pe=new h(i=>typeof i!="function"?i:function(g){const m=U(g,{},{getContent:{minArgs:0,maxArgs:0}});i(m)}),re=new h(i=>typeof i!="function"?i:function(g,m,x){let p=!1,b,l=new Promise(N=>{b=function(v){p=!0,N(v)}}),y;try{y=i(g,m,b)}catch(N){y=Promise.reject(N)}const A=y!==!0&&S(y);if(y!==!0&&!A&&!p)return!1;const _=N=>{N.then(v=>{x(v)},v=>{let Y;v&&(v instanceof Error||typeof v.message=="string")?Y=v.message:Y="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:Y})}).catch(v=>{console.error("Failed to send onMessage rejected reply",v)})};return _(A?y:l),!0}),_e=({reject:i,resolve:a},g)=>{u.runtime.lastError?u.runtime.lastError.message===o?a():i(new Error(u.runtime.lastError.message)):g&&g.__mozWebExtensionPolyfillReject__?i(new Error(g.message)):a(g)},se=(i,a,g,...m)=>{if(m.length<a.minArgs)throw new Error(`Expected at least ${a.minArgs} ${C(a.minArgs)} for ${i}(), got ${m.length}`);if(m.length>a.maxArgs)throw new Error(`Expected at most ${a.maxArgs} ${C(a.maxArgs)} for ${i}(), got ${m.length}`);return new Promise((x,p)=>{const b=_e.bind(null,{resolve:x,reject:p});m.push(b),g.sendMessage(...m)})},Me={devtools:{network:{onRequestFinished:G(Pe)}},runtime:{onMessage:G(re),onMessageExternal:G(re),sendMessage:se.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:se.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Z={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return f.privacy={network:{"*":Z},services:{"*":Z},websites:{"*":Z}},U(u,Me,f)};t.exports=c(chrome)}else t.exports=globalThis.browser})}(L)),L.exports}var ce=ge();const M=oe(ce);var me=(r,e,t)=>new Promise((s,n)=>{var o=f=>{try{u(t.next(f))}catch(h){n(h)}},c=f=>{try{u(t.throw(f))}catch(h){n(h)}},u=f=>f.done?s(f.value):Promise.resolve(f.value).then(o,c);u((t=t.apply(r,e)).next())});function B(r){const e=o=>me(this,null,function*(){const c=t.map(({key:u,cb:f})=>{if(!(u in o))return;const{newValue:h,oldValue:S}=o[u];if(h!==S)return f(h,S)});yield Promise.all(c)});let t=[];function s(o){t.length===0&&r.onChanged.addListener(e),t.push(o)}function n(o){const c=t.indexOf(o);c>=0&&t.splice(c,1),t.length===0&&M.storage.onChanged.removeListener(e)}return{clear(){return r.clear()},getItem(o){return r.get(o).then(c=>{var u;return(u=c[o])!=null?u:null})},setItem(o,c){return r.set({[o]:c??null})},removeItem(o){return r.remove(o)},onChange(o,c){const u={key:o,cb:c};return s(u),()=>n(u)}}}var ue=B(M.storage.local);B(M.storage.session),B(M.storage.sync),B(M.storage.managed);const Ae="challenge-helper-appdata";async function de(){const r=await ue.getItem(Ae);return r?JSON.parse(r):null}function W({buttonText:r,buttonStyle:e,onClick:t,id:s}){const n=document.createElement("button");return s&&(n.id=s),n.textContent=r,w(n,{cursor:"pointer","font-size":"0.875rem","font-weight":"500",padding:"10px 20px",border:"none","border-radius":"0.5rem",...e}),t&&n.addEventListener("click",t),n}async function fe(r,e){const t={default:"[ğŸ¤– ì±Œë¦°ì§€ í—¬í¼ ë™ì‘ ì¤‘] ë¯¸ì…˜ ì²´í¬ ì™„ë£Œí•˜ê¸°",pending:"ëŒ“ê¸€ ì‘ì„± ì¤‘...",success:"âœ… ëŒ“ê¸€ ì‘ì„± ì™„ë£Œ!",error:"ëŒ“ê¸€ ì‘ì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ"},s=W({buttonText:t.default,buttonStyle:e});return s.addEventListener("click",async()=>{const n=r.querySelector(".comment_inbox_text");if(!n){d("ëŒ“ê¸€ ì…ë ¥ì¹¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",2);return}const o=await de();if(!o){d("ëŒ“ê¸€ ì‘ì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ: storageDataê°€ ì—†ìŠµë‹ˆë‹¤.",2);return}n.value=o.missionCheckMessage,n.dispatchEvent(new Event("input",{bubbles:!0}));const c=r.querySelector(".btn_register");if(!c){d("ë“±ë¡ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",2);return}s.disabled=!0,s.textContent=t.pending;try{c.click(),s.textContent=t.success,s.style.backgroundColor="gray"}catch(u){console.error("ëŒ“ê¸€ ì‘ì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",u),s.disabled=!1,s.textContent=t.error}}),s}async function xe(r,e){async function t(u){var D,I;const f=await k({parent:u,selector:".RelatedArticlesList"}),h=Array.from(f==null?void 0:f.querySelectorAll(".list_item")),S=h.findIndex(P=>P.classList.contains("selected")),j=S===0?null:(D=h.at(S-1))==null?void 0:D.querySelector("a"),C=(I=h.at(S+1))==null?void 0:I.querySelector("a");return{$upLink:j,$downLink:C}}const{$upLink:s,$downLink:n}=await t(r),o=W({buttonText:"ğŸ”¼ ì´ë™í•˜ê¸°",buttonStyle:e,onClick:()=>s==null?void 0:s.click()}),c=W({buttonText:"ğŸ”½ ì´ë™í•˜ê¸°",buttonStyle:e,onClick:()=>n==null?void 0:n.click()});return{$pageUpButton:o,$pageDownButton:c}}async function he(r){const e=await k({parent:r,selector:".CommentBox"}),t=document.createElement("div");w(t,{display:"flex",gap:"10px","padding-top":"20px"});const s=await fe(r,{flex:"1","background-color":"rgb(21 128 61)",color:"white"}),{$pageUpButton:n,$pageDownButton:o}=await xe(r,{border:"1px solid rgb(229, 231, 235)"});t.appendChild(s),t.appendChild(n),t.appendChild(o),e.insertBefore(t,e.firstChild)}async function pe(r){const e=await k({parent:r,selector:".like_no"});if(await ne(1e3),e==null?void 0:e.classList.contains("on")){d("ì´ë¯¸ ì¢‹ì•„ìš” ëˆ„ë¥¸ ê²Œì‹œê¸€ ì…ë‹ˆë‹¤.",2);return}e==null||e.click(),d("ì¢‹ì•„ìš”ë¥¼ ëˆŒë €ìŠµë‹ˆë‹¤.",2)}const Q=(r=1)=>{var n;const s=(n=document.querySelector('iframe[name="cafe_main"]').contentWindow.document.body.querySelector("#spiButton.naver-splugin"))==null?void 0:n.getAttribute("data-url");if(s)window.parent.history.replaceState(null,"",s);else{if(r>50)return;setTimeout(()=>{Q(r+1)},100)}};async function be(){var t,s;const e=(t=document.querySelector('iframe[name="cafe_main"]').contentDocument)==null?void 0:t.location.href;if(e!=null&&e.includes("MyCafeIntro")){const n=(s=document.querySelector(".cafe_link"))==null?void 0:s.textContent;window.parent.history.replaceState(null,"",n);return}if(!["ArticleRead.nhn","/articles/","about:blank","members","introduction","popular"].some(n=>e.includes(n))){window.parent.history.replaceState(null,"",e);return}Q()}async function ye(){const r=document.querySelector("._rosRestrict");return(r==null?void 0:r.textContent)!=="ì¹´í˜ ê°€ì…í•˜ê¸°"}let R=!1;async function X(){var r;if(R){d("ì´ë¯¸ ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤",1);return}try{R=!0;const e=document.querySelector('iframe[name="cafe_main"]'),t=e.contentWindow.document,s=(r=e.contentDocument)==null?void 0:r.location.href,n=s==null?void 0:s.includes("ArticleRead.nhn"),o=[be()];await ye()&&n&&(d("Article Page"),o.push(pe(t),ae(t),he(t))),await Promise.allSettled(o)}catch{d("ì—ëŸ¬ ë°œìƒ",1)}finally{R=!1}}const we={matches:["*://*.cafe.naver.com/*"],main(r){d("ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë¶€ì°©");const e=document.querySelector('iframe[name="cafe_main"]');e==null||e.addEventListener("load",()=>{R=!1,d("Iframe ë³€ê²½ ê°ì§€!"),X()}),document.addEventListener("readystatechange",()=>{d("Document ìƒíƒœ ë³€ê²½ ê°ì§€!"),X()})}},F=((te=(ee=globalThis.browser)==null?void 0:ee.runtime)==null?void 0:te.id)==null?globalThis.chrome:globalThis.browser;function q(r,...e){}const ve={debug:(...r)=>q(console.debug,...r),log:(...r)=>q(console.log,...r),warn:(...r)=>q(console.warn,...r),error:(...r)=>q(console.error,...r)},O=class O extends Event{constructor(e,t){super(O.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=t}};E(O,"EVENT_NAME",z("wxt:locationchange"));let V=O;function z(r){var e;return`${(e=F==null?void 0:F.runtime)==null?void 0:e.id}:content:${r}`}function Se(r){let e,t;return{run(){e==null&&(t=new URL(location.href),e=r.setInterval(()=>{let s=new URL(location.href);s.href!==t.href&&(window.dispatchEvent(new V(s,t)),t=s)},1e3))}}}const $=class ${constructor(e,t){E(this,"isTopFrame",window.self===window.top);E(this,"abortController");E(this,"locationWatcher",Se(this));E(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=t,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return F.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,t){const s=setInterval(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(e,t){const s=setTimeout(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(e){const t=requestAnimationFrame((...s)=>{this.isValid&&e(...s)});return this.onInvalidated(()=>cancelAnimationFrame(t)),t}requestIdleCallback(e,t){const s=requestIdleCallback((...n)=>{this.signal.aborted||e(...n)},t);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(e,t,s,n){var o;t==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(o=e.addEventListener)==null||o.call(e,t.startsWith("wxt:")?z(t):t,s,{...n,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),ve.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:$.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var o,c,u;const t=((o=e.data)==null?void 0:o.type)===$.SCRIPT_STARTED_MESSAGE_TYPE,s=((c=e.data)==null?void 0:c.contentScriptName)===this.contentScriptName,n=!this.receivedMessageIds.has((u=e.data)==null?void 0:u.messageId);return t&&s&&n}listenForNewerScripts(e){let t=!0;const s=n=>{if(this.verifyScriptStartedEvent(n)){this.receivedMessageIds.add(n.data.messageId);const o=t;if(t=!1,o&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}};E($,"SCRIPT_STARTED_MESSAGE_TYPE",z("wxt:content-script-started"));let H=$;const Ee=Symbol("null");let Te=0;class ke extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[t,s]of e)this.set(t,s)}}_getPublicKeys(e,t=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const s=this._getPrivateKey(e,t);let n;return s&&this._publicKeys.has(s)?n=this._publicKeys.get(s):t&&(n=[...e],this._publicKeys.set(s,n)),{privateKey:s,publicKey:n}}_getPrivateKey(e,t=!1){const s=[];for(let n of e){n===null&&(n=Ee);const o=typeof n=="object"||typeof n=="function"?"_objectHashes":typeof n=="symbol"?"_symbolHashes":!1;if(!o)s.push(n);else if(this[o].has(n))s.push(this[o].get(n));else if(t){const c=`@@mkm-ref-${Te++}@@`;this[o].set(n,c),s.push(c)}else return!1}return JSON.stringify(s)}set(e,t){const{publicKey:s}=this._getPublicKeys(e,!0);return super.set(s,t)}get(e){const{publicKey:t}=this._getPublicKeys(e);return super.get(t)}has(e){const{publicKey:t}=this._getPublicKeys(e);return super.has(t)}delete(e){const{publicKey:t,privateKey:s}=this._getPublicKeys(e);return!!(t&&super.delete(t)&&this._publicKeys.delete(s))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new ke;function Ne(){}function K(r,...e){}const Ce={debug:(...r)=>K(console.debug,...r),log:(...r)=>K(console.log,...r),warn:(...r)=>K(console.warn,...r),error:(...r)=>K(console.error,...r)};return(async()=>{try{const{main:r,...e}=we,t=new H("content",e);return await r(t)}catch(r){throw Ce.error('The content script "content" crashed on startup!',r),r}})()}();
content;
